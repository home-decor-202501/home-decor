<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.decormasters.homedecor.repository.PostRepository">

    <insert id="saveFeed" keyProperty="id" useGeneratedKeys="true">
        INSERT INTO post
            (content, user_id)
        VALUES
            (#{content}, #{userId})
    </insert>


    <insert id="saveFeedImage" keyProperty="id" useGeneratedKeys="true">
        INSERT INTO post_image
            (post_id, image_url, image_order)
        VALUES
            (#{postId}, #{imageUrl}, #{imageOrder})
    </insert>


<!--     특정 피드에 첨부된 이미지 목록 조회-->

    <select id="findImagesByPostId" resultType="PostImage">
    SELECT
        *
    FROM post_image
    WHERE post_id = #{postId}
    ORDER BY image_order

    </select>



<!--    // 전체 피드 게시물 목록 조회-->

    <select id="findAll" resultType="Post">
        SELECT
            *
        FROM post
        ORDER BY created_at DESC
    </select>


</mapper>